二、项目结构规范
2.1 整体项目结构
微服务项目的结构设计就像是城市规划，良好的布局能让后续的开发和维护事半功倍。我们采用多模块Maven项目结构，每个服务是一个独立的模块，同时共享一些公共组件。
```
mall-microservice/                   # 根项目
├── pom.xml                          # 父POM，定义版本管理
├── mall-common/                     # 公共模块
│   ├── mall-common-core/           # 核心工具类
│   ├── mall-common-redis/          # Redis配置和工具
│   ├── mall-common-mybatis/        # MyBatis配置
│   └── mall-common-web/            # Web相关配置
├── mall-gateway/                    # API网关
├── mall-auth/                       # 认证授权服务
├── mall-user/                       # 用户服务
│   ├── mall-user-api/              # API接口定义
│   ├── mall-user-service/          # 服务实现
│   └── pom.xml
├── mall-product/                    # 商品服务
│   ├── mall-product-api/
│   ├── mall-product-service/
│   └── pom.xml
└── mall-order/                      # 订单服务
├── mall-order-api/
├── mall-order-service/
└── pom.xml
```
2.2 单个服务内部结构
每个微服务内部采用DDD（领域驱动设计）的分层架构。这种架构方式就像是建筑的框架结构，每一层都有明确的职责：
```
mall-user-service/
├── src/main/java/com/mall/user/
│   ├── UserApplication.java              # 启动类
│   ├── interfaces/                       # 接口层
│   │   ├── controller/                   # REST控制器
│   │   │   └── UserController.java
│   │   ├── dto/                         # 数据传输对象
│   │   │   ├── UserRegisterRequest.java
│   │   │   └── UserInfoResponse.java
│   │   └── assembler/                   # DTO与领域对象转换
│   │       └── UserAssembler.java
│   ├── application/                      # 应用层
│   │   ├── service/                     # 应用服务
│   │   │   └── UserApplicationService.java
│   │   └── event/                       # 事件处理
│   │       └── UserEventHandler.java
│   ├── domain/                          # 领域层
│   │   ├── model/                       # 领域模型
│   │   │   ├── User.java               # 聚合根
│   │   │   ├── UserProfile.java        # 实体
│   │   │   └── UserId.java             # 值对象
│   │   ├── repository/                  # 仓储接口
│   │   │   └── UserRepository.java
│   │   └── service/                     # 领域服务
│   │       └── UserDomainService.java
│   └── infrastructure/                  # 基础设施层
│       ├── repository/                  # 仓储实现
│       │   └── UserRepositoryImpl.java
│       ├── mapper/                      # MyBatis Mapper
│       │   └── UserMapper.java
│       ├── config/                      # 配置类
│       │   └── MyBatisConfig.java
│       └── client/                      # 外部服务客户端
│           └── AuthServiceClient.java
└── src/main/resources/
├── application.yml                  # 应用配置
├── bootstrap.yml                     # 启动配置
└── mapper/                          # MyBatis XML文件
└── UserMapper.xml
```

